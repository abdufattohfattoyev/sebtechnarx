# docker-compose.yml - MA'LUMOTLARNI SAQLASH UCHUN TO'G'RILANGAN
version: '3.8'

services:
  bot:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: sebtech_bot
    environment:
      - BOT_TOKEN=${BOT_TOKEN}
    volumes:
      # ✅ DATA PAPKASINI HOST MASHINAGA BOG'LASH (Ma'lumotlar saqlanadi)
      - ./data:/app/data
      # ✅ Logs uchun ham volume (ixtiyoriy)
      - ./logs:/app/logs
    restart: unless-stopped

    # ✅ Container to'xtaganda ham ma'lumotlarni saqlash
    stop_grace_period: 10s

    # ✅ Xotira limitlari (ixtiyoriy)
    deploy:
      resources:
        limits:
          memory: 512M
        reservations:
          memory: 256M